<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ping.homeschool.dao.RequestDao">

    <insert id="addRequest" parameterType="com.ping.homeschool.model.Request">
        insert into request (request_id, request_type, request_status,
                             request_time, request_form)
        values (#{requestId}, #{requestType}, #{requestStatus},
                #{requestTime}, #{requestForm})
    </insert>

    <update id="deleteRequest">
        update request
        set request_status = 0
        where request_id = #{requestId}
    </update>

    <update id="updateRequest">
        update request
        set request_status = #{requestStatus}
        where request_id = #{requestId}
    </update>
    <select id="listRequestRegist" resultType="com.alibaba.fastjson.JSONObject">
        select request_id requestId, request_type requestType, request_form requestForm, request_time requestTime, request_status requestStatus
        from request
        where request_status != 0 and request_type = 1
        order by request_id
        limit #{offSet}, #{pageRow}
    </select>

    <select id="listRequestClass" resultType="com.alibaba.fastjson.JSONObject">
        select request_id requestId, request_type requestType, request_form requestForm, request_time requestTime, request_status requestStatus
        from request
        where request_status != 0 and request_type = 2
        order by request_id
        limit #{offSet}, #{pageRow}
    </select>



    <select id="countRequestRegist" resultType="int">
        select count(0)
        from request
        where request_status != 0 and request_type = 1
    </select>

    <select id="countRequestClass" resultType="int">
        select count(0)
        from request
        where request_status != 0 and request_type = 2
    </select>

</mapper>